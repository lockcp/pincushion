!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){function SelectiveFastClick(layer,selectors){function forEach(array,fn){for(var i=0,l=array.length;l>i;i++)fn(array[i])}selectors||(selectors=layer,layer=document.body),"string"==typeof selectors&&(selectors=[selectors]);var delegate=this.delegate=new FtDomDelegate(layer);delegate.style={msTouchAction:layer.style.msTouchAction},delegate.addEventListener=function(eventType,handler,useCapture){forEach(selectors,function(selector){FtDomDelegate.prototype.on.call(delegate,eventType,selector,handler,useCapture)})},delegate.removeEventListener=function(eventType,handler,useCapture){forEach(selectors,function(selector){FtDomDelegate.prototype.off.call(delegate,eventType,selector,handler,useCapture)})},this.fastclick=new FastClick(delegate),"function"==typeof layer.onclick&&(oldOnClick=layer.onclick,layer.addEventListener("click",function(event){oldOnClick(event)},!1),layer.onclick=null)}var FastClick=require("fastclick").FastClick,FtDomDelegate=require("dom-delegate").Delegate,proto=SelectiveFastClick.prototype;proto.destroy=function(){this.delegate.destroy(),this.fastclick.destroy()},SelectiveFastClick.attach=function(layer,selector){return new SelectiveFastClick(layer,selector)},module.exports=SelectiveFastClick},{"dom-delegate":3,fastclick:4}],2:[function(require,module){"use strict";function Delegate(root){this.listenerMap=[{},{}],root&&this.root(root),this.handle=Delegate.prototype.handle.bind(this)}module.exports=Delegate,Delegate.tagsCaseSensitive=null,Delegate.prototype.root=function(root){var eventType,listenerMap=this.listenerMap;if("string"==typeof root&&(root=document.querySelector(root)),this.rootElement){for(eventType in listenerMap[1])listenerMap[1].hasOwnProperty(eventType)&&this.rootElement.removeEventListener(eventType,this.handle,!0);for(eventType in listenerMap[0])listenerMap[0].hasOwnProperty(eventType)&&this.rootElement.removeEventListener(eventType,this.handle,!1)}if(!root||!root.addEventListener)return this.rootElement&&delete this.rootElement,this;this.rootElement=root;for(eventType in listenerMap[1])listenerMap[1].hasOwnProperty(eventType)&&this.rootElement.addEventListener(eventType,this.handle,!0);for(eventType in listenerMap[0])listenerMap[0].hasOwnProperty(eventType)&&this.rootElement.addEventListener(eventType,this.handle,!1);return this},Delegate.prototype.captureForType=function(eventType){return-1!==["error","blur","focus"].indexOf(eventType)},Delegate.prototype.on=function(eventType,selector,handler,useCapture){var root,listenerMap,matcher,matcherParam;if(!eventType)throw new TypeError("Invalid event type: "+eventType);if("function"==typeof selector&&(useCapture=handler,handler=selector,selector=null),void 0===useCapture&&(useCapture=this.captureForType(eventType)),"function"!=typeof handler)throw new TypeError("Handler must be a type of Function");return root=this.rootElement,listenerMap=this.listenerMap[useCapture?1:0],listenerMap[eventType]||(root&&root.addEventListener(eventType,this.handle,useCapture),listenerMap[eventType]=[]),selector?/^[a-z]+$/i.test(selector)?(null===Delegate.tagsCaseSensitive&&(Delegate.tagsCaseSensitive="i"===document.createElement("i").tagName),matcherParam=Delegate.tagsCaseSensitive?selector:selector.toUpperCase(),matcher=this.matchesTag):/^#[a-z0-9\-_]+$/i.test(selector)?(matcherParam=selector.slice(1),matcher=this.matchesId):(matcherParam=selector,matcher=this.matches):(matcherParam=null,matcher=this.matchesRoot.bind(this)),listenerMap[eventType].push({selector:selector,handler:handler,matcher:matcher,matcherParam:matcherParam}),this},Delegate.prototype.off=function(eventType,selector,handler,useCapture){var i,listener,listenerMap,listenerList,singleEventType;if("function"==typeof selector&&(useCapture=handler,handler=selector,selector=null),void 0===useCapture)return this.off(eventType,selector,handler,!0),this.off(eventType,selector,handler,!1),this;if(listenerMap=this.listenerMap[useCapture?1:0],!eventType){for(singleEventType in listenerMap)listenerMap.hasOwnProperty(singleEventType)&&this.off(singleEventType,selector,handler);return this}if(listenerList=listenerMap[eventType],!listenerList||!listenerList.length)return this;for(i=listenerList.length-1;i>=0;i--)listener=listenerList[i],selector&&selector!==listener.selector||handler&&handler!==listener.handler||listenerList.splice(i,1);return listenerList.length||(delete listenerMap[eventType],this.rootElement&&this.rootElement.removeEventListener(eventType,this.handle,useCapture)),this},Delegate.prototype.handle=function(event){var i,l,root,listener,returned,listenerList,target,EVENTIGNORE="ftLabsDelegateIgnore";if(event[EVENTIGNORE]!==!0)for(target=event.target,target.nodeType===Node.TEXT_NODE&&(target=target.parentNode),root=this.rootElement,listenerList=this.listenerMap[event.eventPhase===Event.CAPTURING_PHASE?1:0][event.type],l=listenerList.length;target&&l;){for(i=0;l>i&&(listener=listenerList[i],listener);i++)if(listener.matcher.call(target,listener.matcherParam,target)&&(returned=this.fire(event,target,listener)),returned===!1)return event[EVENTIGNORE]=!0,void event.preventDefault();if(target===root)break;l=listenerList.length,target=target.parentElement}},Delegate.prototype.fire=function(event,target,listener){return listener.handler.call(target,event,target)},Delegate.prototype.matches=function(el){if(el){var p=el.prototype;return p.matchesSelector||p.webkitMatchesSelector||p.mozMatchesSelector||p.msMatchesSelector||p.oMatchesSelector}}(HTMLElement),Delegate.prototype.matchesTag=function(tagName,element){return tagName===element.tagName},Delegate.prototype.matchesRoot=function(selector,element){return this.rootElement===element},Delegate.prototype.matchesId=function(id,element){return id===element.id},Delegate.prototype.destroy=function(){this.off(),this.root()}},{}],3:[function(require,module){"use strict";var Delegate=require("./delegate");module.exports=function(root){return new Delegate(root)},module.exports.Delegate=Delegate},{"./delegate":2}],4:[function(require,module){function FastClick(layer,options){"use strict";function bind(method,context){return function(){return method.apply(context,arguments)}}var oldOnClick;if(options=options||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=options.touchBoundary||10,this.layer=layer,this.tapDelay=options.tapDelay||200,!FastClick.notNeeded(layer)){for(var methods=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],context=this,i=0,l=methods.length;l>i;i++)context[methods[i]]=bind(context[methods[i]],context);deviceIsAndroid&&(layer.addEventListener("mouseover",this.onMouse,!0),layer.addEventListener("mousedown",this.onMouse,!0),layer.addEventListener("mouseup",this.onMouse,!0)),layer.addEventListener("click",this.onClick,!0),layer.addEventListener("touchstart",this.onTouchStart,!1),layer.addEventListener("touchmove",this.onTouchMove,!1),layer.addEventListener("touchend",this.onTouchEnd,!1),layer.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(layer.removeEventListener=function(type,callback,capture){var rmv=Node.prototype.removeEventListener;"click"===type?rmv.call(layer,type,callback.hijacked||callback,capture):rmv.call(layer,type,callback,capture)},layer.addEventListener=function(type,callback,capture){var adv=Node.prototype.addEventListener;"click"===type?adv.call(layer,type,callback.hijacked||(callback.hijacked=function(event){event.propagationStopped||callback(event)}),capture):adv.call(layer,type,callback,capture)}),"function"==typeof layer.onclick&&(oldOnClick=layer.onclick,layer.addEventListener("click",function(event){oldOnClick(event)},!1),layer.onclick=null)}}var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);FastClick.prototype.needsClick=function(target){"use strict";switch(target.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(target.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===target.type||target.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(target.className)},FastClick.prototype.needsFocus=function(target){"use strict";switch(target.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(target.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!target.disabled&&!target.readOnly;default:return/\bneedsfocus\b/.test(target.className)}},FastClick.prototype.sendClick=function(targetElement,event){"use strict";var clickEvent,touch;document.activeElement&&document.activeElement!==targetElement&&document.activeElement.blur(),touch=event.changedTouches[0],clickEvent=document.createEvent("MouseEvents"),clickEvent.initMouseEvent(this.determineEventType(targetElement),!0,!0,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,!1,!1,!1,!1,0,null),clickEvent.forwardedTouchEvent=!0,targetElement.dispatchEvent(clickEvent)},FastClick.prototype.determineEventType=function(targetElement){"use strict";return deviceIsAndroid&&"select"===targetElement.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(targetElement){"use strict";var length;deviceIsIOS&&targetElement.setSelectionRange&&0!==targetElement.type.indexOf("date")&&"time"!==targetElement.type?(length=targetElement.value.length,targetElement.setSelectionRange(length,length)):targetElement.focus()},FastClick.prototype.updateScrollParent=function(targetElement){"use strict";var scrollParent,parentElement;if(scrollParent=targetElement.fastClickScrollParent,!scrollParent||!scrollParent.contains(targetElement)){parentElement=targetElement;do{if(parentElement.scrollHeight>parentElement.offsetHeight){scrollParent=parentElement,targetElement.fastClickScrollParent=parentElement;break}parentElement=parentElement.parentElement}while(parentElement)}scrollParent&&(scrollParent.fastClickLastScrollTop=scrollParent.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(eventTarget){"use strict";return eventTarget.nodeType===Node.TEXT_NODE?eventTarget.parentNode:eventTarget},FastClick.prototype.onTouchStart=function(event){"use strict";var targetElement,touch,selection;if(event.targetTouches.length>1)return!0;if(targetElement=this.getTargetElementFromEventTarget(event.target),touch=event.targetTouches[0],deviceIsIOS){if(selection=window.getSelection(),selection.rangeCount&&!selection.isCollapsed)return!0;if(!deviceIsIOS4){if(touch.identifier===this.lastTouchIdentifier)return event.preventDefault(),!1;this.lastTouchIdentifier=touch.identifier,this.updateScrollParent(targetElement)}}return this.trackingClick=!0,this.trackingClickStart=event.timeStamp,this.targetElement=targetElement,this.touchStartX=touch.pageX,this.touchStartY=touch.pageY,event.timeStamp-this.lastClickTime<this.tapDelay&&event.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(event){"use strict";var touch=event.changedTouches[0],boundary=this.touchBoundary;return Math.abs(touch.pageX-this.touchStartX)>boundary||Math.abs(touch.pageY-this.touchStartY)>boundary?!0:!1},FastClick.prototype.onTouchMove=function(event){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(event.target)||this.touchHasMoved(event))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(labelElement){"use strict";return void 0!==labelElement.control?labelElement.control:labelElement.htmlFor?document.getElementById(labelElement.htmlFor):labelElement.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(event){"use strict";var forElement,trackingClickStart,targetTagName,scrollParent,touch,targetElement=this.targetElement;if(!this.trackingClick)return!0;if(event.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=event.timeStamp,trackingClickStart=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(touch=event.changedTouches[0],targetElement=document.elementFromPoint(touch.pageX-window.pageXOffset,touch.pageY-window.pageYOffset)||targetElement,targetElement.fastClickScrollParent=this.targetElement.fastClickScrollParent),targetTagName=targetElement.tagName.toLowerCase(),"label"===targetTagName){if(forElement=this.findControl(targetElement)){if(this.focus(targetElement),deviceIsAndroid)return!1;targetElement=forElement}}else if(this.needsFocus(targetElement))return event.timeStamp-trackingClickStart>100||deviceIsIOS&&window.top!==window&&"input"===targetTagName?(this.targetElement=null,!1):(this.focus(targetElement),this.sendClick(targetElement,event),deviceIsIOS&&"select"===targetTagName||(this.targetElement=null,event.preventDefault()),!1);return deviceIsIOS&&!deviceIsIOS4&&(scrollParent=targetElement.fastClickScrollParent,scrollParent&&scrollParent.fastClickLastScrollTop!==scrollParent.scrollTop)?!0:(this.needsClick(targetElement)||(event.preventDefault(),this.sendClick(targetElement,event)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(event){"use strict";return this.targetElement?event.forwardedTouchEvent?!0:event.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(event.stopImmediatePropagation?event.stopImmediatePropagation():event.propagationStopped=!0,event.stopPropagation(),event.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(event){"use strict";var permitted;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===event.target.type&&0===event.detail?!0:(permitted=this.onMouse(event),permitted||(this.targetElement=null),permitted)},FastClick.prototype.destroy=function(){"use strict";var layer=this.layer;deviceIsAndroid&&(layer.removeEventListener("mouseover",this.onMouse,!0),layer.removeEventListener("mousedown",this.onMouse,!0),layer.removeEventListener("mouseup",this.onMouse,!0)),layer.removeEventListener("click",this.onClick,!0),layer.removeEventListener("touchstart",this.onTouchStart,!1),layer.removeEventListener("touchmove",this.onTouchMove,!1),layer.removeEventListener("touchend",this.onTouchEnd,!1),layer.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(layer){"use strict";var metaViewport,chromeVersion;if("undefined"==typeof window.ontouchstart)return!0;if(chromeVersion=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(metaViewport=document.querySelector("meta[name=viewport]")){if(-1!==metaViewport.content.indexOf("user-scalable=no"))return!0;if(chromeVersion>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===layer.style.msTouchAction?!0:!1},FastClick.attach=function(layer,options){"use strict";return new FastClick(layer,options)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick},{}],5:[function(require){"use strict";function resize_window(){var min_width=600,min_height=700;window.outerHeight<min_height&&window.resizeTo(min_width,min_height),$(document).keydown(function(e){close_window(e)})}function parse_url_parameters(){(window.onpopstate=function(){var match,pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl," "))},query=window.location.search.substring(1);for(url_params={};match=search.exec(query);)url_params[decode(match[1])]=decode(match[2])})(),$("input#url").val(url_params.url),$("input#title").val(url_params.title),$("textarea#description").val(url_params.description)}function authenticate_user(){url_params.user&&url_params.token||(alert("You must provide both ‘user’ and ‘token’ parameters to this page to allow it to use the Pinboard API."),$("#submit").addClass("fail"),$("#submit").prop("disabled",!0),$("#mainspinner").addClass("hidden"))}function auth_token(){return url_params.user+":"+url_params.token}function serialized_inputs(){var serialized_form_inputs=$("#url, #title, #description, #tags").serialize();return $("#private").prop("checked")&&(serialized_form_inputs+="&shared=no"),$("#toread").prop("checked")&&(serialized_form_inputs+="&toread=yes"),serialized_form_inputs}function check_for_existing_bookmark_details(){if(url_params.url){var bookmark_details_api=api_endpoint+"posts/get?format=json&auth_token="+auth_token()+"&url="+clean_url(url_params.url);$.get(bookmark_details_api,"json").done(function(response){if($("#mainspinner").addClass("hidden"),!(response.posts.length<1)){var bookmark=response.posts[0];if($("input#title").val(bookmark.description),$("textarea#description").val(bookmark.extended&&$("textarea#description").val().length>0?bookmark.extended+"\n"+$("textarea#description").val():bookmark.extended),prepopulate_tags(bookmark.tags),"no"===bookmark.shared&&$("#private").prop("checked",!0).change(),"yes"===bookmark.toread&&$("#toread").prop("checked",!0),bookmark.time){var date=new Date(bookmark.time);$("#bookmark-status").text("Previously saved on "+date.getFullYear()+"/"+date.getMonth()+"/"+date.getDate())}$("#updating").val("true"),$("#submit span.text").text("Update bookmark")}}).fail(function(response){"401"===response.status&&alert("401 Unauthorised. Please check your username and API access token.")})}}function set_up_form_submission(){$("#post-to-pinboard").on("submit",function(event){event.preventDefault();var post_bookmark_api=api_endpoint+"posts/add?format=json&auth_token="+auth_token()+"&"+serialized_inputs();$.get(post_bookmark_api,"json").done(function(response){"done"===response.result_code?(console.log("Bookmark saved correctly."),Ladda.stopAll(),$("#submit").addClass("success"),save_updated_user_tags(),setTimeout(function(){$("#submit").removeClass("success"),window.close()},900)):"must provide title"===response.result_code&&(Ladda.stopAll(),$("#submit").addClass("fail"),setTimeout(function(){$("#submit").removeClass("fail")},1900),$("#title").focus())}).fail(function(response){Ladda.stopAll(),$("#submit").addClass("fail"),"401"===response.status&&alert("401 Unauthorised. Please check your username and API access token.")})}),$("input, textarea").on("blur",function(){$("body").animate({scrollTop:0},200)}),$("#private").on("change",function(){reflectPrivateStatus()})}function set_up_fast_click(){var SelectiveFastClick=require("selective-fastclick"),selectors=["input[type=text], input[type=url], textarea","button.suggested_tag","label"];SelectiveFastClick.attach(document.body,selectors)}function prepopulate_tags(tag_string){$("input#tags").data("previous_tags",tag_string);for(var tags=tag_string.split(" "),i=0;i<tags.length;i++)$("input#tags")[0].selectize.addOption({label:tags[i]}),$("input#tags")[0].selectize.addItem(tags[i]),$("input#tags")[0].selectize.close(),$("#suggested button").filter(function(){return $(this).text().toLowerCase()===tags[i]}).hide()}function set_up_tag_auto_complete(){if($("input#tags").selectize({delimiter:" ",create:!0,openOnFocus:!1,maxOptions:8,persist:!1,createOnBlur:!1,hideSelected:!0,diacritics:!0,valueField:"label",labelField:"label",searchField:["label"]}),localStorage&&localStorage.tags){var user_tags=JSON.parse(localStorage.tags);console.log("Populating dropdown."),$.each(user_tags,function(key){$("input#tags")[0].selectize.addOption({label:key})})}}function get_suggested_tags(){if(url_params.url){var suggested_tags_api=api_endpoint+"posts/suggest?format=json&auth_token="+auth_token()+"&url="+clean_url(url_params.url);$("#tagspinner").removeClass("hidden"),$.get(suggested_tags_api,function(data){show_suggested_tags(data),$("#tagspinner").addClass("hidden")},"json")}}function show_suggested_tags(tag_suggestions){if(tag_suggestions){tag_suggestions=$.merge(tag_suggestions[1].recommended,tag_suggestions[0].popular),tag_suggestions=tag_suggestions.map(function(tag){return tag.toLowerCase()}),tag_suggestions=$.unique(tag_suggestions),tag_suggestions=remove_spurious_results(tag_suggestions),tag_suggestions=remove_overly_common_tags(tag_suggestions);for(var suggested_tags=[],i=0;i<tag_suggestions.length;i++)if(-1===(" "+$("#tags").val()+" ").indexOf(" "+tag_suggestions[i]+" ")){var suggested_tag='<button type="button" class="suggested_tag">'+pin_cook(tag_suggestions[i])+"</button>";suggested_tags.push(suggested_tag)}suggested_tags.length>0?($("#suggested").append(suggested_tags.join(" ")),$("#suggested button").on("click",function(){return add_tag(pin_escape($(this).text())),$(this).hide(200),!1}),$("#suggestion_row th").text("suggested tags")):($("#suggestion_row th").addClass("none").text("No tag suggestions for this page."),$("#suggested").hide(800))}}function reflectPrivateStatus(){$("#private").prop("checked")===!0?$("body").addClass("private"):$("body").removeClass("private")}function remove_spurious_results(tag_suggestions){return $.inArray("facebook",tag_suggestions)>=0&&$.inArray("googlereader",tag_suggestions)>=0&&$.inArray("ifttt",tag_suggestions)>=0&&$.inArray("objective-c",tag_suggestions)>=0&&$.inArray("twitter",tag_suggestions)>=0&&$.inArray("twitterlink",tag_suggestions)>=0&&$.inArray("wsh",tag_suggestions)>=0&&$.inArray("music",tag_suggestions)>=0&&$.inArray("04:22pm",tag_suggestions)>=0&&$.inArray("1960s",tag_suggestions)>=0?[]:tag_suggestions}function remove_overly_common_tags(tag_suggestions){return tag_suggestions=$.grep(tag_suggestions,function(tag){return tag=tag.toLowerCase(),"bookmarks_bar"!==tag&&"pin-later"!==tag&&"unread"!==tag&&"*resources"!==tag&&"unlabeled"!==tag&&"via:packrati.us"!==tag&&"bookmarks_menu"!==tag&&"from"!==tag&&"ifttt"!==tag&&"later"!==tag&&"saved"!==tag&&"read"!==tag&&"feedly"!==tag&&"for"!==tag&&"recently"!==tag&&"tobookmarks"!==tag&&"from:ifttt"!==tag&&"instapaper"!==tag&&"!fromtwitter"!==tag&&"feedbin"!==tag&&"favorites_bar"!==tag&&"imported"!==tag&&".dailybrowse"!==tag&&"barra_dei_preferiti"!==tag&&"bookmarks_toolbar"!==tag&&"from_pocket"!==tag&&"pocket"!==tag&&"archive"!==tag&&"toread"!==tag&&"readlater"!==tag})}function add_tag(tag){$("input#tags")[0].selectize.addOption({label:tag}),$("input#tags")[0].selectize.addItem(tag)}function download_user_tags(){if(localStorage&&localStorage.tags)console.log("Have tags already.");else{console.log("Downloading user’s tags."),localStorage.tags=JSON.stringify([]);var all_tags_api=api_endpoint+"tags/get?format=json&auth_token="+auth_token();$.get(all_tags_api,"json").done(function(response){localStorage.tags=JSON.stringify(response),localStorage["tags-updated"]=new Date}).fail(function(response){"401"===response.status&&alert("401 Unauthorised. Please check your username and API access token.")})}}function save_updated_user_tags(){for(var user_tags=JSON.parse(localStorage.tags),potentially_new_tags=$("input#tags").val().split(" "),i=0;i<potentially_new_tags.length;i++)if(user_tags[potentially_new_tags[i]]){if($("input#tags").data("previous_tags")&&-1!==$("input#tags").data("previous_tags").indexOf(potentially_new_tags[i]))continue;user_tags[potentially_new_tags[i]]=parseInt(user_tags[potentially_new_tags[i]])+1}else user_tags[potentially_new_tags[i]]=1;localStorage.tags=JSON.stringify(user_tags),localStorage["tags-updated"]=new Date}function pin_escape(s){return s=s.replace(/\\/g,"\\\\"),s=s.replace(/'/g,"\\'"),s=s.replace(/"/g,"&quot;")}function pin_cook(s){return s=s.replace(/</g,"&lt;"),s=s.replace(/>/g,"&gt;"),s=s.replace(/"/g,"&quot;")}function clean_url(url){return encodeURIComponent(url)}function close_window(e){27===e.keyCode&&window.close()}var url_params,api_endpoint="https://pinboard-bridge.herokuapp.com/";$(function(){resize_window(),parse_url_parameters(),authenticate_user(),set_up_fast_click(),set_up_tag_auto_complete(),set_up_form_submission(),check_for_existing_bookmark_details(),get_suggested_tags(),download_user_tags(),$("input#tags")[0].selectize.focus(),Ladda.bind("button[type=submit]")}),RegExp.escape=function(text){return text.replace(/[-[\]{}()*+?.,\\\\'"^$|#\s]/g,"\\$&")}},{"selective-fastclick":1}]},{},[5]);
//# sourceMappingURL=main.min.map