!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){"use strict";function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}var url_params,submit_error_timer,field_error_timer,API_ENDPOINT,submission_block_timer,Ladda=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(require("ladda"));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function display_critical_error(message){alert(message),$(".helptext").remove(),$("#submit").addClass("fail"),$("#submit").prop("disabled",!0),$("#mainspinner").addClass("hidden")}function auth_token(){return url_params.user+":"+url_params.token}function showBookmarkTimestamp(date){$("#bookmark-status").attr("title",moment(date).format("dddd, MMMM Do YYYY, h:mma")).text("Originally saved "+moment(date).fromNow())}function leave_a_gap(){$("textarea#description").val($.trim($("textarea#description").val())),""!==$("textarea#description").val()&&($("textarea#description").val($("textarea#description").val()+"\n\n"),$("textarea#description").animate({scrollTop:"800"},1e3))}function remove_error_state_after_delay(){clearTimeout(submit_error_timer),clearTimeout(field_error_timer),submit_error_timer=setTimeout(function(){$("#submit").removeClass("fail"),$("#submit span.text").text($("#submit").data("stateText"))},1500),field_error_timer=setTimeout(function(){$("label span.helptext").fadeOut(300,function(){$(this).remove(),$("label").removeClass("error")})},2900)}function populate_dropdown(){if(localStorage&&localStorage.tags){var user_tags=JSON.parse(localStorage.tags);console.log("Populating dropdown with "+Object.keys(user_tags).length+" tags."),$.each(user_tags,function(key,value){$("input#tags")[0].selectize.addOption({label:key,normalised_label:key.replace(/[&-_\[\]#,+()$~%.'":*?<>{}]/g,""),count:value})})}}function remove_suggested_tag_separator(){0<$("#suggested").children().length&&("HR"===$("#suggested").children(":visible").first()[0].tagName||"HR"===$("#suggested").children(":visible").last()[0].tagName)&&$("#suggested hr").hide(200,function(){$(this).remove()}),0===$("#suggested button").length&&($("#suggestion_row th").hide(300),$("#suggested").addClass("none").text("No more suggested tags for this page."))}function display_reload_button(){$("#mainspinner").replaceWith('<button id="reload"><i class="fa fa-repeat"></i></button>'),$("#reload").click(function(){event.preventDefault(),$(this).addClass("active"),window.location.reload()})}function download_user_tags(){console.log("Downloading user’s tags...");var all_tags_api=API_ENDPOINT+"tags/get?format=json&auth_token="+auth_token();$.get(all_tags_api).done(function(response){localStorage.tags=JSON.stringify(response),localStorage["tags-updated"]=new Date,console.log("Downloaded tags."),populate_dropdown()}).fail(function(response){401===response.status&&display_critical_error("401 Unauthorised. Please check the username and API access token you provided.")})}function clean_url(url){return encodeURIComponent(url)}submission_block_timer=!(API_ENDPOINT="https://pinboard-api.herokuapp.com/"),$(function(){window.outerHeight<750&&window.resizeTo(600,750),$(document).keydown(function(e){!function(e){27===e.keyCode&&window.close()}(e)}),(window.onpopstate=function(){var match,pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl," "))},query=window.location.search.substring(1);for(url_params={};match=search.exec(query);)url_params[decode(match[1])]=decode(match[2])})(),$("input#url").val(url_params.url),$("input#title").val(function(title_string){return title_string?title_string.replace(/^▶ /,""):""}(url_params.title)),$("textarea#description").val($.trim(url_params.description)),$("input#private").prop("checked","true"===url_params.private),$("input#toread").prop("checked","true"===url_params.private),leave_a_gap(),url_params.user&&url_params.token||display_critical_error("You must provide both ‘user’ and ‘token’ parameters to this page to allow it to use the Pinboard API."),$("input#tags").selectize({delimiter:" ",create:!0,openOnFocus:!1,maxOptions:15,persist:!0,createOnBlur:!1,hideSelected:!0,selectOnTab:!1,diacritics:!0,valueField:"label",labelField:"label",searchField:["label","normalised_label"],score:function(search){var score=this.getScoreFunction(search);return function(item){return score(item)*(1+item.count/100)}},plugins:{remove_button:{title:"Remove this tag"}},onEnterKeypress:function(){!1===submission_block_timer&&$("#submit").click()},onChange:function(){$("input#tags")[0].selectize.close(),submission_block_timer=!0,setTimeout(function(){submission_block_timer=!1},10)},onItemAdd:function(value,$item){$(".suggested_tag").each(function(){$(this).text()===value&&$(this).hide(400,function(){$(this).remove(),remove_suggested_tag_separator()})}),$("input#tags")[0].selectize.close()},render:{option:function(data,escape){return'<div class="item">'+escape(data.label)+'<span class="optioncount '+function(count){switch(!0){case 100<count:return"tw100";case 50<count:return"tw50";case 10<count:return"tw10";case 1<count:return"tw1"}}(escape(data.count))+'">'+(void 0!==data.count?escape(data.count):"0")+"</span></div>"}}}),populate_dropdown(),$("#post-to-pinboard").on("submit",function(event){event.preventDefault(),$("#submit span.text").html("Saving bookmark&hellip;");var post_bookmark_api=API_ENDPOINT+"posts/add?format=json&auth_token="+auth_token()+"&"+function(){$("#description").val($.trim($("#description").val()));var serialized_form_inputs=$("#url, #title, #description, #tags").serialize();return $("#private").prop("checked")&&(serialized_form_inputs+="&shared=no"),$("#toread").prop("checked")&&(serialized_form_inputs+="&toread=yes"),serialized_form_inputs}();$.ajax({type:"GET",url:post_bookmark_api,timeout:25e3}).done(function(response){"done"===response.result_code?(console.log("Bookmark saved correctly."),Ladda.stopAll(),$("#submit").addClass("success"),$("#submit span.text").text("Bookmark saved!"),function(){for(var user_tags=JSON.parse(localStorage.tags),potentially_new_tags=$("input#tags").val().split(" "),i=0;i<potentially_new_tags.length;i++)if(user_tags[potentially_new_tags[i]]){if($("input#tags").data("previous_tags")&&-1!==$("input#tags").data("previous_tags").indexOf(potentially_new_tags[i]))continue;user_tags[potentially_new_tags[i]]=parseInt(user_tags[potentially_new_tags[i]])+1}else user_tags[potentially_new_tags[i]]=1;localStorage.tags=JSON.stringify(user_tags),localStorage["tags-updated"]=new Date}(),setTimeout(function(){window.close(),setTimeout(function(){$("#submit").removeClass("success"),$("#submit span.text").text($("#submit").data("stateText")),showBookmarkTimestamp(new Date)},300)},900)):(Ladda.stopAll(),$(".helptext").remove(),$("#submit").addClass("fail"),"missing url"===response.result_code&&($("label[for=url]").addClass("error").append('<span class="helptext"> is required</span>'),$("#url").focus()),"must provide title"===response.result_code&&($("label[for=title]").addClass("error").append('<span class="helptext"> is required</span>'),$("#title").focus()),$(".helptext").fadeIn(),remove_error_state_after_delay())}).fail(function(response){Ladda.stopAll(),$(".helptext").remove(),$("#submit").addClass("fail"),0===response.status&&"error"===response.statusText&&(alert("Cross-domain request failed. Your connection may have dropped, or the request may be too long; please try shortening the description text."),display_reload_button()),414===response.status&&($("label[for=description]").addClass("error").append('<span class="helptext"> is too long</span>'),$("#description").addClass("expanded"),$("#description").focus()),401===response.status&&display_critical_error("401 Unauthorised. Please check the username and API access token you provided."),$(".helptext").fadeIn(),remove_error_state_after_delay()})}),$("input, textarea").on("blur",function(){$("body").animate({scrollTop:0},200)}),"ontouchstart"in window||$("input#tags")[0].selectize.focus(),$("textarea#description").on("blur",function(){leave_a_gap()}),$("#private").on("change",function(){!0===$("#private").prop("checked")?$("body").addClass("private"):$("body").removeClass("private")}),Ladda.bind("button[type=submit]"),function(){if(url_params.url){var bookmark_details_api=API_ENDPOINT+"posts/get?format=json&auth_token="+auth_token()+"&url="+clean_url(url_params.url);$.support.cors=!0,$.get(bookmark_details_api).done(function(response){if($("#mainspinner").addClass("hidden"),$("#submit").data("stateText","Add bookmark"),1===response.posts.length){var bookmark=response.posts[0];$("input#title").val(bookmark.description),bookmark.extended&&$.trim(bookmark.extended)!==$.trim(url_params.description)&&$("textarea#description").val($.trim(bookmark.extended)+"\n\n"+$.trim(url_params.description)),leave_a_gap(),function(tag_string){if(""!=tag_string){$("input#tags").data("previous_tags",tag_string);for(var tags=tag_string.split(" "),i=0;i<tags.length;i++)$("input#tags")[0].selectize.addOption({label:tags[i]}),$("input#tags")[0].selectize.addItem(tags[i]),$("input#tags")[0].selectize.close();$("#suggested button").filter(function(){return $(this).text().toLowerCase()===tags[i]}).remove()}}(bookmark.tags),"no"===bookmark.shared?$("#private").prop("checked",!0).change():$("#private").prop("checked",!1),"yes"===bookmark.toread?$("#toread").prop("checked",!0):$("#toread").prop("checked",!1),bookmark.time&&showBookmarkTimestamp(new Date(bookmark.time)),$("#submit").data("stateText","Update bookmark"),$("#submit span.text").text("Update bookmark")}}).fail(function(response){0===response.status&&(response.statusText,1)&&(display_critical_error("Cross-domain request failed. Your browser is denying this request from being sent."),display_reload_button()),401===response.status&&display_critical_error("401 Unauthorised. Please check the username and API access token you provided.")})}}(),function(){if(url_params.url){var suggested_tags_api=API_ENDPOINT+"posts/suggest?format=json&auth_token="+auth_token()+"&url="+clean_url(url_params.url);$("#tagspinner").removeClass("hidden"),$.get(suggested_tags_api).done(function(response){!function(tag_suggestions){if(tag_suggestions){tag_suggestions=(tag_suggestions=$.merge(tag_suggestions[1].recommended,tag_suggestions[0].popular)).map(function(tag){return tag.toLowerCase()}),tag_suggestions=function(tag_suggestions){if(!localStorage||!localStorage.tags)return tag_suggestions;var ranked_tags=[],user_tags=JSON.parse(localStorage.tags),separator=!0;return $.each(tag_suggestions,function(index,tag){user_tags.hasOwnProperty(tag)?(separator&&(ranked_tags.unshift("$separator"),separator=!1),ranked_tags.unshift(tag)):ranked_tags.push(tag)}),ranked_tags}(tag_suggestions=function(tag_suggestions){var ignored_tags=["bookmarks_bar","pin-later","unread","*resources","unlabeled","via:packrati.us","bookmarks_menu",".from:twitter","twitterlink","from","ifttt","later","saved","read","feedly","for","recently","tobookmarks","from:ifttt","instapaper","!fromtwitter","feedbin","favorites_bar","imported",".dailybrowse","barra_dei_preferiti","bookmarks_toolbar","via:pocket","from_pocket","pocket","archive","toread","readlater","via:popular","!tweet","twitter-fav","created-by:ifttt","starred","soon","riposte","github:starred","iftttfeedly","github-starred-to-pinboard","appdotnet","top","instapaper:","&amp;","(popular","--","bookmarks)","from:feedly","from:rss","instapaper:import","instapaper:starred","*","**","***","instapaper:import","googlereader","no_tag","evernote-web-clipper"];return tag_suggestions=$.grep(tag_suggestions,function(tag){return-1===$.inArray(tag.toLowerCase(),ignored_tags)}),tag_suggestions=$.grep(tag_suggestions,function(tag){return null===tag.toLowerCase().match(/^via:/)})}(tag_suggestions=function(tag_suggestions){return["ifttt","facebook","youtube","objective-c","twitter","twitterlink","wsh",".from:twitter","@codepo8","1960s"].every(function(tag){return tag_suggestions.includes(tag)})?[]:tag_suggestions}(tag_suggestions=$.grep(tag_suggestions,function(v,k){return $.inArray(v,tag_suggestions)===k}))));for(var suggested_tags=[],i=0;i<tag_suggestions.length;i++)"$separator"!==tag_suggestions[i]?-1===(" "+$("#tags").val().toLowerCase()+" ").indexOf(" "+tag_suggestions[i]+" ")&&suggested_tags.push('<button type="button" class="suggested_tag">'+tag_suggestions[i].replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+"</button>"):suggested_tags.push("<hr>");0<suggested_tags.length?($("#suggested").append(suggested_tags.join("")),$("#suggested button").on("click",function(event){event.preventDefault(),function(tag){$("input#tags")[0].selectize.addOption({label:tag}),$("input#tags")[0].selectize.addItem(tag)}(function(s){return s=(s=(s=s.replace(/\\/g,"\\\\")).replace(/'/g,"\\'")).replace(/"/g,"&quot;")}($(this).text())),$(this).hide(100,function(){$(this).remove(),remove_suggested_tag_separator()})}),remove_suggested_tag_separator(),$("#suggestion_row th").text("suggested tags")):($("#suggestion_row th").hide(300),$("#suggested").addClass("none").text("No suggested tags for this page."))}}(response),$("#tagspinner").addClass("hidden")}).fail(function(response){$("#suggestion_row th").hide(800),$("#tagspinner").hide(300)})}}(),localStorage&&(localStorage.tags?(console.log("Have a record of tags already, setting up delayed download."),setTimeout(function(){download_user_tags()},1e4)):download_user_tags())}),RegExp.escape=function(text){return text.replace(/[-[\]{}()*+?.,\\\\'"^$|#\s]/g,"\\$&")}},{ladda:2}],2:[function(require,module,exports){!function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("spin.js")):"function"==typeof define&&define.amd?define(["spin"],e):t.Ladda=e(t.Spinner)}(this,function(t){"use strict";var e=[];function a(a){if(void 0!==a){if(/ladda-button/i.test(a.className)||(a.className+=" ladda-button"),a.hasAttribute("data-style")||a.setAttribute("data-style","expand-right"),!a.querySelector(".ladda-label")){var u=document.createElement("span");u.className="ladda-label",n=a,i=u,(r=document.createRange()).selectNodeContents(n),r.surroundContents(i),n.appendChild(i)}var n,i,r,d,o,s=a.querySelector(".ladda-spinner");s||((s=document.createElement("span")).className="ladda-spinner"),a.appendChild(s);var F={start:function(){return d=d||function(e){var a,u,n=e.offsetHeight;0===n&&(n=parseFloat(window.getComputedStyle(e).height)),32<n&&(n*=.8),e.hasAttribute("data-spinner-size")&&(n=parseInt(e.getAttribute("data-spinner-size"),10)),e.hasAttribute("data-spinner-color")&&(a=e.getAttribute("data-spinner-color")),e.hasAttribute("data-spinner-lines")&&(u=parseInt(e.getAttribute("data-spinner-lines"),10));var i=.2*n;return new t({color:a||"#fff",lines:u||12,radius:i,length:.6*i,width:i<7?2:3,zIndex:"auto",top:"auto",left:"auto",className:""})}(a),a.disabled=!0,a.setAttribute("data-loading",""),clearTimeout(o),d.spin(s),this.setProgress(0),this},startAfter:function(t){return clearTimeout(o),o=setTimeout(function(){F.start()},t),this},stop:function(){return F.isLoading()&&(a.disabled=!1,a.removeAttribute("data-loading")),clearTimeout(o),d&&(o=setTimeout(function(){d.stop()},1e3)),this},toggle:function(){return this.isLoading()?this.stop():this.start()},setProgress:function(t){t=Math.max(Math.min(t,1),0);var e=a.querySelector(".ladda-progress");0===t&&e&&e.parentNode?e.parentNode.removeChild(e):(e||((e=document.createElement("div")).className="ladda-progress",a.appendChild(e)),e.style.width=(t||0)*a.offsetWidth+"px")},enable:function(){return this.stop()},disable:function(){return this.stop(),a.disabled=!0,this},isLoading:function(){return a.hasAttribute("data-loading")},remove:function(){clearTimeout(o),a.disabled=!1,a.removeAttribute("data-loading"),d&&(d.stop(),d=null),e.splice(e.indexOf(F),1)}};return e.push(F),F}console.warn("Ladda button target must be defined.")}function u(t,e){if("function"==typeof t.addEventListener){var u=a(t),n=-1;t.addEventListener("click",function(){var a,i,r=!0,d=function(t,e){for(;t.parentNode&&t.tagName!==e;)t=t.parentNode;return e===t.tagName?t:void 0}(t,"FORM");if(void 0!==d&&!d.hasAttribute("novalidate"))if("function"==typeof d.checkValidity)r=d.checkValidity();else for(var o=(a=d,i=[],["input","textarea","select"].forEach(function(t){for(var e=a.getElementsByTagName(t),u=0;u<e.length;u++)e[u].hasAttribute("required")&&i.push(e[u])}),i),s=0;s<o.length;s++){var F=o[s],l=F.getAttribute("type");if(""===F.value.replace(/^\s+|\s+$/g,"")&&(r=!1),"checkbox"!==l&&"radio"!==l||F.checked||(r=!1),"email"===l&&(r=/^[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9-]+(\.[a-z0-9-]+)*$/i.test(F.value)),"url"===l&&(r=/^([a-z]([a-z]|\d|\+|-|\.)*):(\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?((\[(|(v[\da-f]{1,}\.(([a-z]|\d|-|\.|_|~)|[!\$&'\(\)\*\+,;=]|:)+))\])|((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=])*)(:\d*)?)(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*|(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)){0})(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(F.value)),!r)break}r&&(u.startAfter(1),"number"==typeof e.timeout&&(clearTimeout(n),n=setTimeout(u.stop,e.timeout)),"function"==typeof e.callback&&e.callback.apply(null,[u]))},!1)}}return{bind:function(t,e){var a;if("string"==typeof t)a=document.querySelectorAll(t);else{if("object"!=typeof t)throw new Error("target must be string or object");a=[t]}e=e||{};for(var n=0;n<a.length;n++)u(a[n],e)},create:a,stopAll:function(){for(var t=0,a=e.length;t<a;t++)e[t].stop()}}})},{"spin.js":3}],3:[function(require,module,exports){var root,factory;root=this,factory=function(){"use strict";var useCssAnimations,sheet,prefixes=["webkit","Moz","ms","O"],animations={};function createEl(tag,prop){var n,el=document.createElement(tag||"div");for(n in prop)el[n]=prop[n];return el}function ins(parent){for(var i=1,n=arguments.length;i<n;i++)parent.appendChild(arguments[i]);return parent}function addAnimation(alpha,trail,i,lines){var name=["opacity",trail,~~(100*alpha),i,lines].join("-"),start=.01+i/lines*100,z=Math.max(1-(1-alpha)/trail*(100-start),alpha),prefix=useCssAnimations.substring(0,useCssAnimations.indexOf("Animation")).toLowerCase(),pre=prefix&&"-"+prefix+"-"||"";return animations[name]||(sheet.insertRule("@"+pre+"keyframes "+name+"{0%{opacity:"+z+"}"+start+"%{opacity:"+alpha+"}"+(.01+start)+"%{opacity:1}"+(start+trail)%100+"%{opacity:"+alpha+"}100%{opacity:"+z+"}}",sheet.cssRules.length),animations[name]=1),name}function vendor(el,prop){var pp,i,s=el.style;if(void 0!==s[prop=prop.charAt(0).toUpperCase()+prop.slice(1)])return prop;for(i=0;i<prefixes.length;i++)if(void 0!==s[pp=prefixes[i]+prop])return pp}function css(el,prop){for(var n in prop)el.style[vendor(el,n)||n]=prop[n];return el}function merge(obj){for(var i=1;i<arguments.length;i++){var def=arguments[i];for(var n in def)void 0===obj[n]&&(obj[n]=def[n])}return obj}function getColor(color,idx){return"string"==typeof color?color:color[idx%color.length]}var el,defaults={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};function Spinner(o){this.opts=merge(o||{},Spinner.defaults,defaults)}if(Spinner.defaults={},merge(Spinner.prototype,{spin:function(target){this.stop();var self=this,o=self.opts,el=self.el=createEl(null,{className:o.className});if(css(el,{position:o.position,width:0,zIndex:o.zIndex,left:o.left,top:o.top}),target&&target.insertBefore(el,target.firstChild||null),el.setAttribute("role","progressbar"),self.lines(el,self.opts),!useCssAnimations){var alpha,i=0,start=(o.lines-1)*(1-o.direction)/2,fps=o.fps,f=fps/o.speed,ostep=(1-o.opacity)/(f*o.trail/100),astep=f/o.lines;!function anim(){i++;for(var j=0;j<o.lines;j++)alpha=Math.max(1-(i+(o.lines-j)*astep)%f*ostep,o.opacity),self.opacity(el,j*o.direction+start,alpha,o);self.timeout=self.el&&setTimeout(anim,~~(1e3/fps))}()}return self},stop:function(){var el=this.el;return el&&(clearTimeout(this.timeout),el.parentNode&&el.parentNode.removeChild(el),this.el=void 0),this},lines:function(el,o){var seg,i=0,start=(o.lines-1)*(1-o.direction)/2;function fill(color,shadow){return css(createEl(),{position:"absolute",width:o.scale*(o.length+o.width)+"px",height:o.scale*o.width+"px",background:color,boxShadow:shadow,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*i+o.rotate)+"deg) translate("+o.scale*o.radius+"px,0)",borderRadius:(o.corners*o.scale*o.width>>1)+"px"})}for(;i<o.lines;i++)seg=css(createEl(),{position:"absolute",top:1+~(o.scale*o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:useCssAnimations&&addAnimation(o.opacity,o.trail,start+i*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&ins(seg,css(fill("#000","0 0 4px #000"),{top:"2px"})),ins(el,ins(seg,fill(getColor(o.color,i),"0 0 1px rgba(0,0,0,.1)")));return el},opacity:function(el,i,val){i<el.childNodes.length&&(el.childNodes[i].style.opacity=val)}}),"undefined"!=typeof document){el=createEl("style",{type:"text/css"}),ins(document.getElementsByTagName("head")[0],el),sheet=el.sheet||el.styleSheet;var probe=css(createEl("group"),{behavior:"url(#default#VML)"});!vendor(probe,"transform")&&probe.adj?(sheet.addRule(".spin-vml","behavior:url(#default#VML)"),Spinner.prototype.lines=function(el,o){var r=o.scale*(o.length+o.width),s=2*o.scale*r;function grp(){return css(vml("group",{coordsize:s+" "+s,coordorigin:-r+" "+-r}),{width:s,height:s})}var i,margin=-(o.width+o.length)*o.scale*2+"px",g=css(grp(),{position:"absolute",top:margin,left:margin});function seg(i,dx,filter){ins(g,ins(css(grp(),{rotation:360/o.lines*i+"deg",left:~~dx}),ins(css(vml("roundrect",{arcsize:o.corners}),{width:r,height:o.scale*o.width,left:o.scale*o.radius,top:-o.scale*o.width>>1,filter:filter}),vml("fill",{color:getColor(o.color,i),opacity:o.opacity}),vml("stroke",{opacity:0}))))}if(o.shadow)for(i=1;i<=o.lines;i++)seg(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=o.lines;i++)seg(i);return ins(el,g)},Spinner.prototype.opacity=function(el,i,val,o){var c=el.firstChild;o=o.shadow&&o.lines||0,c&&i+o<c.childNodes.length&&(c=(c=(c=c.childNodes[i+o])&&c.firstChild)&&c.firstChild)&&(c.opacity=val)}):useCssAnimations=vendor(probe,"animation")}function vml(tag,attr){return createEl("<"+tag+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',attr)}return Spinner},"object"==typeof module&&module.exports?module.exports=factory():"function"==typeof define&&define.amd?define(factory):root.Spinner=factory()},{}]},{},[1]);
//# sourceMappingURL=scripts.min.js.map